---
tags:
  - study
  - 이펙티브자바
title: 지역변수의 범위를 최소화 하라
chapter: 아이템 57
---
## 지역변수의 범위를 최소화 하라
- 코드 가독성과 유지 보수성이 높아지고 오류 가능성은 낮아진다.

### 지역변수의 범위 최소화 방법1 선언
- 범위를 줄이는 가장 강력한 기법은 '가장 처음 쓰일 때 선언하기'다.
	- 미리 선언하면 코드가 어수선해져서 가독성이 떨어짐
	- 미리 선언하면 사용 시점에 초깃값이 기억나지 않을 수 있다.
- 선언과 동시에 초기화 해아한다.
	-  초기화에 필요한 정보가 않다면 충분해질때까지 선언을 미룬다.
	- try-catch 는 이 규칙에서 예외다. 
	- 변수를 초기화하는 표현식에서 검사 예외를 던질 가능성이 있다면 try 블럭 안에서 초기화해야한다.
	- 변수 값을 try 블록 바깥에서도 사용한다면 try 블록 앞에서 선언한다.\
### 지역변수의 범위 최소화 방법2 반복문
- 반복변수의 값을 반복문 종료 후에도 사용하는 상황이 아니라면 `while` 문보다 `for` 문을 사용하자
```java
// 57-1
Iterator<Element> i = c.iterator();
while(i.hasNext()) {
	doSomething(i.next());
// 57-2
Iterator<Element> i2 = c.iterator();
while(i.hasNext()) {  // 순회하지 않고 곧장 끝나버리는 버그 발생
	doSomething(i2.next());
```
- 57-2 반복문은 이전 `while`문을 복사해서 사용한 것이다. `i`의 유효범위가 끝나지 않아서 컴파일도 잘되고 실행시 예외도 던지지 않는다. 
- 하지만 두번재 `while` 문은 곧 끝나버린다.프로그램의 오류가 겉으로 드러나지 않으며 쉽게 발견되지도 않는다.
```java
for (Iterator<Element> i = c.iterator(); i.hasNext(); ) { 
	Element e = i.next();
    ...
}

// 다음의 코드는 "i를 찾을 수 없다"는 컴파일 오류를 발생시킨다.
for (Iterator<Element> i2 = c.iterator(); i.hasNext(); ) { 
	Element e = i2.next();;
    ...
}
```
- `for` 문을 사용하면 이런 복사 붙여넣기 오류는 컴파일 단계에서 잡아준다.
- 첫번째 반복문이 사용한 원소와 반복자의 유효범위가 반복문 종료와 함께 끝나기 때문이다.
- 또한, 변수 유효범위가 `for` 문 범위와 일치하여 똑같은 이름으로 변수를 여러 반복문에서 떠도 서로 아무런 영향을 주지 않는다.
- 또한 가독성이 더 좋다.

### 지역변수의 범위 최소화 방법3 메서드
- 메서드를 작게 유지하고 한가지 기능에 집중하는 것이다.
- 메서드를 기능별로 쪼개면 문제가 없다.
