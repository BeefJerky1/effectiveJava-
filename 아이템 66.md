---
tags:
  - study
  - 이펙티브자바
title: 네이티브 메서드는 신중히 사용하라
chapter: 아이템 66
---
## 네이티브 메서드는 신중히 사용하라

### 핵심
- 네이티브 메서드를 사용하려거든 한번더 생각하라. 네이티브 메서드가 성능을 개선해주는 일은 많지 않다. 저수준 지원이나 네이티브 라이브러리를 사용해야만 해서 어쩔 수 없더라도 네이티브 코드는 최소한만 사용하고 철저히 테스트하라. 네이티브 코드 안에 숨은 단하나의 버그가 여러분 애플리케이션 전체를 훼손할 수 있다.

### 네이티브 메서드
- `C`나  `C++` 같은 네이티브 프로그래밍 언어로 작성한 메서드를 말한다.
- 자바 네이티브 인터페이스는 자바 프로그램이 네이티브 메서드를 호출하는 기술이다.

### 네이티브 메서드의 쓰임
- 레지스트리 같은 플랫폼 특화 기능을 사용한다.
- 네이티브 코드로 작성된 기존 라이브러리를 사용한다. 레거시 데이터를 사용하는 레거시 라이브러리가 그 예이다.
- 성능 개선을 목적으로 성능에 결정적인 영향을 주는 영역만 따로 네이티브 언어로 작성한다.

### 네이티브 메서드를 써야 한다면?
- 성능을 개선할 목적으로 네이티브 메서드를 사용하는 것은 권장하지 않는다. 
- JVM은 그동안 엄청난 속도로 발전함. 
- 지금의 자바는 다른 플랫폼에 견줄만한 성능을 보인다.
### 네이티브 메서드의 단점
- 안전하지 않으므로 애플리케이션 메모리 훼손 오류로부터 안전하지 않다.
- 자바보다 플랫폼을 많이타 이식성도 낫다
- 디버깅도 어렵다.
- 주의하지 않으면 속도가 오히려 느려질 수 있다.
- 가빕지 컬렉터가 네이티브 메모리는 자동회수하지 못하고 심지어 추적조차 할 수 없다.
- 접착코드를 작성해야 하는데 이는 귀찮기도 하고 가독성도 떨어진다.